# Use latest stable Node.js base image
FROM node:lts

# Create and set working directory
WORKDIR /app

# Copy only package.json and install dependencies first (for caching)
COPY package.json ./
RUN npm install

# Copy rest of the bot files
COPY . .

# Install PM2 globally
RUN npm install -g pm2

# Expose port (used if you add web dashboard, not needed for WhatsApp-only bots)
EXPOSE 9090

# Start the bot using PM2
CMD ["pm2-runtime", "index.js"]
